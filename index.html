<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="description" content="Wikipediholism Test">
		<meta name="author" content="Diriector_Doc">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="last-updated" content="Wed, 30 Dec 2020 23:31 GMT">
		<meta name="keywords" content="diriector_doc, diriectordoc, diriector doc, wikipedia, wikipediholism">
		<title>Wikipediholism Test</title>
		<link href="main.css" rel="stylesheet" type="text/css">
		<link href="../global.css" rel="stylesheet" type="text/css">
		<script type="text/javascript" src="../global.js"></script>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
		<script type="text/javascript">
			$(async function() {
				let content = (await $.getJSON("https://cors-anywhere.herokuapp.com/https://en.wikipedia.org/w/api.php?action=query&format=json&prop=revisions&titles=Wikipedia%3AWikipediholism_test&formatversion=2&rvprop=content&rvslots=*")).query.pages[0].revisions[0].slots.main.content.split(/==[\w\s]+==/g),
					questions = content[1].split("\n#"),
					p = -1,
					pages = [],
					articles = (await $.getJSON("https://cors-anywhere.herokuapp.com/https://en.wikipedia.org/w/api.php?action=query&format=json&meta=siteinfo&formatversion=2&siprop=statistics")).query.statistics.articles;

				if (/^\n.*($|\n)/g.test(questions[0])) {
					questions.shift()
				}
				for (let e of questions) {
					e = {
						value: +/\(([0-9.-]+).*\)$/g.exec(e = e.replaceAll(/\n/g, ""))[1],
						text: ((str) => {
							let nowikis = /<nowiki>(.*)<\/nowiki>/g.exec(str);
							str = str
								.replaceAll(/(^|[^'])'([^']|$)/gi, "$1\u0027$2")
								.replaceAll(/\[(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*))\s(.*)\]/gi, '<a href="$1">$2</a>')
								.replaceAll(/''([^'']+)''/gi, '<i>$1</i>')
								.replaceAll(/'''([^''']+)'''/gi, '<strong>$1</strong>')
								.replaceAll(/\[\[([^|]+)\]\]/gi, '<a href="https://en.wikipedia.org/wiki/$1">$1</a>')
								.replaceAll(/\[\[([^|]+)\|([^|]+)\]\]/gi, '<a href="https://en.wikipedia.org/wiki/$1">$2</a>')
								.replaceAll(/\{\{NUMBEROFARTICLES\}\}/g, articles)
							if(nowikis){
								for(let i = 1; i < nowikis.length; i++){
									str = str.replace(/<nowiki>(.*)<\/nowiki>/g, nowikis[i])
								}
							}
							return str
						})(e.replaceAll(/\s\([^\(]+\)$/g, ""))
					};
					if (/^\.+/g.test(e.text)) {
						e.text = e.text.replaceAll(/^\.+/g, "");
						pages[p].push(e)
					} else {
						pages[++p] = [e]
					}
				}
				console.log(pages)
			})
		</script>
	</head>
	<body>
		<div id="container">
			<a class="github" href="https://github.com/DiriectorDoc/Doc-s-Wikipediholism-test"></a>
			Credit: Text on this page was fetched from <a href="https://en.wikipedia.org/wiki/Wikipedia:Wikipediholism_test">Wikipedia:Wikipediholism test</a>, which is availible under <a href="https://en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
			<div class="footer" />
		</div>
	</body>
</html>